{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Institute Knowledge Base","text":"<ul> <li>\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043a \u0438\u043d\u0442\u0435\u0440\u0430\u043a\u0442\u0438\u0432\u043d\u043e\u043c\u0443 \u0433\u0440\u0430\u0444\u0443: Graph</li> </ul>"},{"location":"graph/","title":"Interactive Graph","text":"<p>\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u0433\u0440\u0430\u0444: /graph/</p>"},{"location":"Areas/%D0%9A%D0%BE%D0%BC%D0%B1%D0%B8%D0%BD%D0%B0%D1%82%D0%BE%D1%80%D0%B8%D0%BA%D0%B0/","title":"\u041a\u043e\u043c\u0431\u0438\u043d\u0430\u0442\u043e\u0440\u0438\u043a\u0430","text":"","tags":["kb/area"]},{"location":"Areas/%D0%9A%D0%BE%D0%BC%D0%B1%D0%B8%D0%BD%D0%B0%D1%82%D0%BE%D1%80%D0%B8%D0%BA%D0%B0/#description","title":"Description","text":"","tags":["kb/area"]},{"location":"Areas/%D0%9E%D0%BF%D1%82%D0%B8%D0%BC%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D1%8F/","title":"\u041e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u044f","text":"","tags":["kb/area"]},{"location":"Areas/%D0%9E%D0%BF%D1%82%D0%B8%D0%BC%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D1%8F/#description","title":"Description","text":"","tags":["kb/area"]},{"location":"Areas/%D0%A2%D0%BE%D0%BF%D0%BE%D0%BB%D0%BE%D0%B3%D0%B8%D1%8F/","title":"\u0422\u043e\u043f\u043e\u043b\u043e\u0433\u0438\u044f","text":"","tags":["kb/area"]},{"location":"Areas/%D0%A2%D0%BE%D0%BF%D0%BE%D0%BB%D0%BE%D0%B3%D0%B8%D1%8F/#description","title":"Description","text":"","tags":["kb/area"]},{"location":"Labs/%D0%98%D0%98%D0%98/","title":"\u0418\u0418\u0418","text":"","tags":["kb/lab"]},{"location":"Labs/%D0%98%D0%98%D0%98/#description","title":"Description","text":"","tags":["kb/lab"]},{"location":"Labs/%D0%9A%D0%BE%D0%BC%D0%B1%D0%93%D0%B5%D0%BE/","title":"\u041a\u043e\u043c\u0431\u0413\u0435\u043e","text":"","tags":["kb/lab"]},{"location":"Labs/%D0%9A%D0%BE%D0%BC%D0%B1%D0%93%D0%B5%D0%BE/#description","title":"Description","text":"","tags":["kb/lab"]},{"location":"People/%D0%93%D0%B0%D1%81%D0%BD%D0%B8%D0%BA%D0%BE%D0%B2/","title":"\u0413\u0430\u0441\u043d\u0438\u043a\u043e\u0432","text":"","tags":["kb/person"]},{"location":"People/%D0%93%D0%B0%D1%81%D0%BD%D0%B8%D0%BA%D0%BE%D0%B2/#position","title":"Position","text":"","tags":["kb/person"]},{"location":"People/%D0%93%D0%B0%D1%81%D0%BD%D0%B8%D0%BA%D0%BE%D0%B2/#expertise","title":"Expertise","text":"","tags":["kb/person"]},{"location":"People/%D0%93%D0%B0%D1%81%D0%BD%D0%B8%D0%BA%D0%BE%D0%B2/#contacts","title":"Contacts","text":"","tags":["kb/person"]},{"location":"People/%D0%9A%D1%83%D0%BF%D0%B0%D0%B2%D1%81%D0%BA%D0%B8%D0%B9/","title":"\u041a\u0443\u043f\u0430\u0432\u0441\u043a\u0438\u0439","text":"","tags":["kb/person"]},{"location":"People/%D0%9A%D1%83%D0%BF%D0%B0%D0%B2%D1%81%D0%BA%D0%B8%D0%B9/#position","title":"Position","text":"","tags":["kb/person"]},{"location":"People/%D0%9A%D1%83%D0%BF%D0%B0%D0%B2%D1%81%D0%BA%D0%B8%D0%B9/#expertise","title":"Expertise","text":"","tags":["kb/person"]},{"location":"People/%D0%9A%D1%83%D0%BF%D0%B0%D0%B2%D1%81%D0%BA%D0%B8%D0%B9/#contacts","title":"Contacts","text":"","tags":["kb/person"]},{"location":"_templates/Areas/","title":"Areas","text":"<p>&lt;%* const title = await tp.system.prompt(\"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043e\u0431\u043b\u0430\u0441\u0442\u0438 \u043d\u0430\u0443\u043a\u0438?\"); if (!title) return;</p> <p>await tp.file.rename(title);</p> <p>// helpers const mdFiles = () =&gt; app.vault.getMarkdownFiles(); const fm = (file) =&gt; app.metadataCache.getFileCache(file)?.frontmatter; const byType = (t) =&gt; mdFiles().filter(f =&gt; fm(f)?.type === t); const uniq = (arr) =&gt; [...new Set(arr)].filter(Boolean);</p> <p>async function pickMany(options, placeholder=\"\u0412\u044b\u0431\u0435\u0440\u0438 (ESC \u0447\u0442\u043e\u0431\u044b \u0437\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u044c)\") {   options = uniq(options).sort((a,b)=&gt;a.localeCompare(b,'ru'));   let left = [...options];   let picked = [];   while (left.length) {     const choice = await tp.system.suggester(left, left, false, placeholder);     if (!choice) break;     picked.push(choice);     left = left.filter(x =&gt; x !== choice);   }   return picked; }</p> <p>const areas = byType(\"area\").map(f =&gt; f.basename).filter(n =&gt; n !== title); const collaborators = await pickMany(areas, \"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0435 \u043e\u0431\u043b\u0430\u0441\u0442\u0438\");</p> <p>tR += <code>--- type: area title: \"${title}\" collaborates_with: [${collaborators.map(a =&gt;</code>\"${a}\"`).join(\", \")}] tags: [\"kb/area\"]</p>"},{"location":"_templates/Areas/#title","title":"${title}","text":""},{"location":"_templates/Areas/#description","title":"Description","text":"<p>`; %&gt;</p>"},{"location":"_templates/lab/","title":"Lab","text":"<p>&lt;%* const title = await tp.system.prompt(\"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043b\u0430\u0431\u043e\u0440\u0430\u0442\u043e\u0440\u0438\u0438?\"); if (!title) return;</p> <p>await tp.file.rename(title);</p> <p>// -------- helpers -------- const mdFiles = () =&gt; app.vault.getMarkdownFiles(); const fm = (file) =&gt; app.metadataCache.getFileCache(file)?.frontmatter; const byType = (t) =&gt; mdFiles().filter(f =&gt; fm(f)?.type === t); const uniq = (arr) =&gt; [...new Set(arr)].filter(Boolean);</p> <p>const asArray = (v) =&gt; Array.isArray(v) ? v : (v ? [v] : []); const hasText = (arr, text) =&gt; asArray(arr).some(x =&gt; String(x).trim() === String(text).trim());</p> <p>async function pickOne(options, placeholder=\"\u0412\u044b\u0431\u0435\u0440\u0438\") {   options = uniq(options).sort((a,b)=&gt;a.localeCompare(b,'ru'));   if (!options.length) return \"\";   return await tp.system.suggester(options, options, false, placeholder) || \"\"; } async function pickMany(options, placeholder=\"\u0412\u044b\u0431\u0435\u0440\u0438 (ESC \u0447\u0442\u043e\u0431\u044b \u0437\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u044c)\") {   options = uniq(options).sort((a,b)=&gt;a.localeCompare(b,'ru'));   let left = [...options];   let picked = [];   while (left.length) {     const choice = await tp.system.suggester(left, left, false, placeholder);     if (!choice) break;     picked.push(choice);     left = left.filter(x =&gt; x !== choice);   }   return picked; }</p> <p>// -------- \u0432\u044b\u0431\u0435\u0440\u0438 \u043e\u0431\u043b\u0430\u0441\u0442\u044c -------- const areas = byType(\"area\").map(f =&gt; f.basename); const selectedArea = await pickOne(areas, \"\u0412\u044b\u0431\u0435\u0440\u0438 \u043e\u0431\u043b\u0430\u0441\u0442\u044c \u043d\u0430\u0443\u043a\u0438\");</p> <p>// -------- \u043a\u0430\u043d\u0434\u0438\u0434\u0430\u0442\u044b \u0434\u043b\u044f \u043a\u043e\u043b\u043b\u0430\u0431\u043e\u0440\u0430\u0446\u0438\u0439: \u0442\u043e\u043b\u044c\u043a\u043e \u043b\u0430\u0431\u044b \u044d\u0442\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438 -------- const allLabs = byType(\"lab\"); const labsSameArea = allLabs   .filter(f =&gt; f.basename !== title)   .filter(f =&gt; hasText(fm(f)?.area, selectedArea))     // area \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0441\u043f\u0438\u0441\u043a\u043e\u043c \u0438\u043b\u0438 \u0441\u0442\u0440\u043e\u043a\u043e\u0439   .map(f =&gt; f.basename);</p> <p>const collaborators = await pickMany(labsSameArea, \"\u041a\u043e\u043b\u043b\u0430\u0431\u043e\u0440\u0430\u0446\u0438\u0438: \u0442\u043e\u043b\u044c\u043a\u043e \u043b\u0430\u0431\u044b \u044d\u0442\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438\");</p> <p>// -------- \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0438 (\u043f\u043e\u043a\u0430 \u0431\u0435\u0437 \u0444\u0438\u043b\u044c\u0442\u0440\u0430) -------- const people = byType(\"person\").map(f =&gt; f.basename); const members = await pickMany(people, \"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u043e\u0432\");</p> <p>// -------- YAML -------- tR += <code>--- type: lab title: ${title} area: ${selectedArea ?</code>[${selectedArea}]<code>:</code>[]<code>} members: ${members.length ?</code>[${members.join(\", \")}]<code>:</code>[]<code>} collaborates_with: ${collaborators.length ?</code>[${collaborators.join(\", \")}]<code>:</code>[]`} tags: [kb/lab]</p>"},{"location":"_templates/lab/#title","title":"${title}","text":""},{"location":"_templates/lab/#description","title":"Description","text":"<p>`; %&gt;</p>"},{"location":"_templates/person/","title":"Person","text":"<p>&lt;%* const title = await tp.system.prompt(\"\u0418\u043c\u044f \u0424\u0430\u043c\u0438\u043b\u0438\u044f?\"); if (!title) return;</p> <p>await tp.file.rename(title);</p> <p>// -------- helpers -------- const mdFiles = () =&gt; app.vault.getMarkdownFiles(); const fm = (file) =&gt; app.metadataCache.getFileCache(file)?.frontmatter; const byType = (t) =&gt; mdFiles().filter(f =&gt; fm(f)?.type === t); const uniq = (arr) =&gt; [...new Set(arr)].filter(Boolean);</p> <p>const asArray = (v) =&gt; Array.isArray(v) ? v : (v ? [v] : []); const hasText = (arr, text) =&gt; asArray(arr).some(x =&gt; String(x).trim() === String(text).trim());</p> <p>async function pickOne(options, placeholder=\"\u0412\u044b\u0431\u0435\u0440\u0438\") {   options = uniq(options).sort((a,b)=&gt;a.localeCompare(b,'ru'));   if (!options.length) return \"\";   return await tp.system.suggester(options, options, false, placeholder) || \"\"; } async function pickMany(options, placeholder=\"\u0412\u044b\u0431\u0435\u0440\u0438 (ESC \u0447\u0442\u043e\u0431\u044b \u0437\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u044c)\") {   options = uniq(options).sort((a,b)=&gt;a.localeCompare(b,'ru'));   let left = [...options];   let picked = [];   while (left.length) {     const choice = await tp.system.suggester(left, left, false, placeholder);     if (!choice) break;     picked.push(choice);     left = left.filter(x =&gt; x !== choice);   }   return picked; }</p> <p>// -------- \u0432\u044b\u0431\u0435\u0440\u0438 \u043b\u0430\u0431\u043e\u0440\u0430\u0442\u043e\u0440\u0438\u044e -------- const labsFiles = byType(\"lab\"); const labNames = labsFiles.map(f =&gt; f.basename); const selectedLab = await pickOne(labNames, \"\u0412\u044b\u0431\u0435\u0440\u0438 \u043b\u0430\u0431\u043e\u0440\u0430\u0442\u043e\u0440\u0438\u044e\");</p> <p>// \u043d\u0430\u0445\u043e\u0434\u0438\u043c \u043e\u0431\u043b\u0430\u0441\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u043e\u0439 \u043b\u0430\u0431\u044b const selectedLabFile = labsFiles.find(f =&gt; f.basename === selectedLab); const selectedArea = selectedLabFile ? (asArray(fm(selectedLabFile)?.area)[0] || \"\") : \"\";</p> <p>// \u0441\u0442\u0440\u043e\u0438\u043c \u0441\u043f\u0438\u0441\u043e\u043a \u043b\u0430\u0431\u043e\u0440\u0430\u0442\u043e\u0440\u0438\u0439 \u044d\u0442\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438 const labsSameArea = labsFiles   .filter(f =&gt; hasText(fm(f)?.area, selectedArea))   .map(f =&gt; f.basename);</p> <p>// -------- \u043a\u0430\u043d\u0434\u0438\u0434\u0430\u0442\u044b-\u043b\u044e\u0434\u0438: \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0437 \u044d\u0442\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438 -------- const peopleFiles = byType(\"person\"); const peopleSameArea = peopleFiles   .filter(f =&gt; f.basename !== title)   .filter(f =&gt; {     const personLabs = asArray(fm(f)?.lab);        // \u0443 \u0447\u0435\u043b\u043e\u0432\u0435\u043a\u0430 lab: [..]     return personLabs.some(l =&gt; labsSameArea.includes(String(l)));   })   .map(f =&gt; f.basename);</p> <p>const collaborates = await pickMany(   peopleSameArea,   selectedArea     ? <code>\u041a\u043e\u043b\u043b\u0430\u0431\u043e\u0440\u0430\u0446\u0438\u0438: \u043b\u044e\u0434\u0438 \u0438\u0437 \u043e\u0431\u043b\u0430\u0441\u0442\u0438 \"${selectedArea}\"</code>     : <code>\u041a\u043e\u043b\u043b\u0430\u0431\u043e\u0440\u0430\u0446\u0438\u0438: \u043b\u044e\u0434\u0438 (\u043e\u0431\u043b\u0430\u0441\u0442\u044c \u043d\u0435 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0430)</code> );</p> <p>// -------- YAML -------- tR += <code>--- type: person title: ${title} lab: ${selectedLab ?</code>[${selectedLab}]<code>:</code>[]<code>} collaborates_with: ${collaborates.length ?</code>[${collaborates.join(\", \")}]<code>:</code>[]`} tags: [kb/person]</p>"},{"location":"_templates/person/#title","title":"${title}","text":""},{"location":"_templates/person/#position","title":"Position","text":""},{"location":"_templates/person/#expertise","title":"Expertise","text":"<p>`; %&gt;</p>"}]}